{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "definitions": {
	"bits": {
            "additionalProperties": false,
            "properties": {
                "attribute": {
                    "type": "string"
                },
                "expectedValue": {
                    "type": [
                        "boolean",
                        "number",
                        "string"
                    ]
                },
		"actualValue": {
		    "type": [
			"boolean",
			"number",
			"string"
		    ]
		},
                "bitMap": {
                    "minimum": 0,
                    "type": "number"
                },
		"comparisonOperator": {
		    "type": "string",
		    "enum": ["NEQ", "EQ", "GEQ"]
		},
		"returnOperator": {
		    "type": "string",
		    "enum": ["AND", "AND_READ", "EQ", "READ"]
		},
		"value": {
                    "type": [
                        "boolean",
                        "number",
                        "string"
                    ]
                }
            },
            "required": [
                "attribute",
                "bitMap",
                "expectedValue",
		"comparisonOperator",
		"returnOperator"
            ],
            "type": "object"
        },
	"bar": {
            "additionalProperties": false,
            "properties": {
                "protocol": {
                    "type": "string",
		    "enum": ["Bar1", "Bar0"]
                }
            },
            "required": [
                "protocol"
            ],
            "type": "object"
        },
	"mdio": {
            "additionalProperties": false,
            "properties": {
		"protocol": {
		    "type": "string",
		    "enum": ["MDIO"]
		},
                "devAddr": {
                    "type": "number",
		    "minimum": 0
                },
                "portAddr": {
                    "type": "number",
		    "minimum": 0
                },
		"slice": {
		    "type": "number",
		    "minimum": 0
		}
            },
            "required": [
                "protocol",
                "devAddr",
                "portAddr"
            ],
            "type": "object"
        },
	"i2c": {
            "additionalProperties": false,
            "properties": {
                "busSel": {
                    "type": "number",
		    "minimum": 0
                },
                "devAddr": {
                    "type": "number",
		    "minimum": 0
                },
                "protocol": {
		    "type": "string",
		    "enum" : ["I2C"]
		},
                "page": {
                    "maximum": 3,
                    "minimum": 0,
                    "type": "number"
                }
            },
            "required": [
                "protocol",
                "devAddr",
                "busSel"
            ]
        },
        "register": {
            "additionalProperties": false,
            "properties": {
                "address": {
                    "minimum": 0,
                    "type": "number"
                },
                "name": {
                    "type": "string"
                },
		"device": {
		    "type": "string"
		},
		"protocolInterface": {
		    "oneOf": [
			{
			    "$ref": "#/definitions/bar"
			},
			{
			    "$ref": "#/definitions/mdio"
			},
			{
			    "$ref": "#/definitions/i2c"
			}
		    ]
		},
                "values": {
                    "items": {
                        "$ref": "#/definitions/bits"
                    },
                    "type": "array"
                },
		"linkedRegister": {
		    "type": "object",
		    "properties": {
			"address" : {
			    "type" : "number",
			    "minimum": 0
			}, 
			"combinationOperator": {
			    "type": "string",
			    "enum": ["SLR"]
			}
		    },
		    "required": [
			"address",
			"combinationOperator"
			]
		}
            },
            "required": [
                "address",
                "name",
                "values",
		"protocolInterface",
		"device"
            ],
            "type": "object"
        },
	"registerSet": {
	    "additionalProperties": false,
	    "properties": {
		"setName" : {
		    "type" : "string",
		    "enum": ["Bar1", "Bar0", "MDIO", "I2C"]
		},
		"registers" : {
		    "items": {
			"$ref": "#/definitions/register"
		    },
		    "type": "array"
		}
	    },
	    "required": [
		"setName",
		"registers"
	    ],
	    "type": "object"
	}
    },
    "description": "Schema for a board memory map",
    "properties": {
        "boardFamily": {
            "type": "string"
        },
        "memoryMap": {
            "items": {
                "$ref": "#/definitions/registerSet"
            },
            "type": "array"
        }
    },
    "required": [
        "boardFamily",
        "memoryMap"
    ],
    "type": "object"
}
